import Nt from"pug-lexer";var w=(s=>(s.DEBUG="debug",s.LOG="log",s.INFO="info",s.WARN="warn",s.ERROR="error",s.OFF="off",s))(w||{}),P=class{constructor(t=console,i="info"){this.logger=t;this.level=i}static isSupportedLogLevel(t){return typeof t=="string"&&(t==="debug"||t==="log"||t==="info"||t==="warn"||t==="error"||t==="off")}setLogLevel(t){this.level=t}isDebugEnabled(){return this.level<="debug"}debug(t,...i){this.message("debug",t,...i)}log(t,...i){this.message("log",t,...i)}info(t,...i){this.message("info",t,...i)}warn(t,...i){this.message("warn",t,...i)}error(t,...i){this.message("error",t,...i)}message(t,i,...e){this.level!=="off"&&this.level<=t&&t!=="off"&&this.logger[t](i,...e)}};function E(r=console){return new P(r)}var l=E(console);process.env.NODE_ENV==="test"&&l.setLogLevel("debug");var y=process.env.PRETTIER_PLUGIN_PUG_LOG_LEVEL;y&&(y=y.toLowerCase(),P.isSupportedLogLevel(y)&&l.setLogLevel(y));var p="Pug";var O={category:p,type:"path",array:!0,default:[{value:[]}],description:""},_={...O,description:"Define a list of patterns for attributes that are sorted to the beginning."},L={...O,description:"Define a list of patterns for attributes that are sorted at the end."},C={category:p,type:"choice",default:"as-is",description:"Change how the attributes between _beginning_ and _end_ should be sorted.",choices:[{value:"asc",description:"Sort middle attributes ascending."},{value:"desc",description:"Sort middle attributes descending."},{value:"as-is",description:"Middle attributes are leave untouched."}]};var N={category:p,type:"int",default:-1,description:"The line length where Prettier will try wrap.",range:{start:-1,end:Number.POSITIVE_INFINITY,step:1}},R={category:p,type:"choice",default:null,description:"",choices:[{value:null,description:"Use `singleQuote` value."},{value:!0,description:"Use single quotes instead of double quotes."},{value:"true",description:"Use single quotes instead of double quotes."},{value:!1,description:"Use double quotes instead of double quotes."}]},U={category:p,type:"int",default:-1,description:"Number of spaces per indentation level.",range:{start:-1,end:Number.POSITIVE_INFINITY,step:1}},$={category:p,type:"choice",default:null,description:"",choices:[{value:null,description:"Use `useTabs` value."},{value:!0,description:"Indent with tabs instead of spaces."},{value:"true",description:"Indent with tabs instead of spaces."},{value:!1,description:"Indent with spaces instead of tabs."}]},B={category:p,type:"choice",default:null,description:"",choices:[{value:null,description:"Use `bracketSpacing` value."},{value:!0,description:"Print spaces between brackets."},{value:"true",description:"Print spaces between brackets."},{value:!1,description:"Do not print spaces between brackets."}]},G={category:p,type:"choice",default:null,description:"",choices:[{value:null,description:"Use `bracketSpacing` value."},{value:!0,description:"Print semicolons."},{value:"true",description:"Print semicolons."},{value:!1,description:"Do not print semicolons, except at the beginning of lines which may need them."}]},D={category:p,type:"choice",default:null,description:"Include parentheses around a sole arrow function parameter.",choices:[{value:null,description:"Use `arrowParens` value."},{value:"always",description:"Always add parens. Example: `(x) => x`"},{value:"avoid",description:"Omit parens when possible. Example: `x => x`"}]},F={category:p,type:"choice",default:null,description:"Determines position of closing bracket which wraps attributes.",choices:[{value:null,description:"Use `bracketSameLine` value."},{value:!0,description:`
			Closing bracket remains with last attribute's line.
			Example:
			input(
				type='text',
				value='my_value',
				name='my_name',
				alt='my_alt',
				autocomplete='on')
			`},{value:"true",description:`
			Closing bracket remains with last attribute's line.
			Example:
			input(
				type='text',
				value='my_value',
				name='my_name',
				alt='my_alt',
				autocomplete='on')
			`},{value:!1,description:`
			Closing bracket ends with a new line.
			Example:
			input(
				type='text',
				value='my_value',
				name='my_name',
				alt='my_alt',
				autocomplete='on'
			)
			`}]};var W={category:p,type:"choice",default:"as-is",description:"Change behavior of boolean attributes.",choices:[{value:"as-is",description:"Nothing is changed."},{value:"none",description:"Every attribute with empty quotes will have them removed."},{value:"all",description:"Every boolean attribute will be expressed with empty quotes."}]},Q={category:p,type:"path",default:[{value:[]}],array:!0,description:'Define a list of patterns for attributes that will be forced to have empty quotes even with "none" selected.'};var j={category:p,type:"choice",default:"always",description:"Change when attributes are separated by commas in tags.",choices:[{value:"always",description:'Always separate attributes with commas. Example: `button(type="submit", (click)="play()", disabled)`'},{value:"as-needed",description:'Only add commas between attributes where required. Example: `button(type="submit", (click)="play()" disabled)`'},{value:"none",description:'Never add commas between attributes. Example: `button(type="submit" @click="play()" :style="style" disabled)`'}]};function V(r){switch(r){case"always":case"as-needed":case"none":return r}throw new Error(`Invalid option for pugAttributeSeparator. Found '${r}'. Possible options: 'always', 'as-needed' or 'none'`)}var M={category:p,type:"choice",default:"before-attributes",description:"Define where classes be placed.",choices:[{value:"before-attributes",description:"Forces all valid class literals to be placed before attributes."},{value:"after-attributes",description:"Forces all valid class literals to be placed after attributes."}]};var Y={category:p,type:"choice",default:"literal",description:"Define how classes should be formatted.",choices:[{value:"literal",description:"Forces all valid classes to be printed as literals."},{value:"attribute",description:"Forces all valid classes to be printed in class attribute."},{value:"as-is",description:"Disables class formatting."}]};var q={category:p,type:"choice",default:0,description:"Determines the indent level of closing brackets when wrapping attributes.",choices:[{value:0,description:`
			Closing bracket aligns with the element.
			Example:
			input(
				type='text',
				value='my_value',
				name='my_name',
				alt='my_alt',
				autocomplete='on'
			)
			`},{value:1,description:`
			Closing bracket aligns with the element's attributes.
			Example:
			input(
				type='text',
				value='my_value',
				name='my_name',
				alt='my_alt',
				autocomplete='on'
				)
			`}]};var H={category:p,type:"choice",default:"keep-all",description:"Change behavior of spaces within comments.",choices:[{value:"keep-all",description:"Keep all spaces within comments. Example: `//    this  is   a   comment`"},{value:"keep-leading",description:"Keep leading spaces within comments. Example: `//    this is a comment`"},{value:"trim-all",description:"Trim all spaces within comments. Example: `// this is a comment`"}]};function A(r,t,i=!1){switch(t){case"keep-leading":{let e="",n=0;for(n;n<r.length&&r[n]===" ";n++)e+=" ";return e+=r.slice(n).trim().replaceAll(/\s\s+/g," "),e}case"trim-all":{let e=r.trim();return e=e.replaceAll(/\s\s+/g," "),!i&&r[0]===" "&&(e=` ${e}`),e}case"keep-all":default:return r}}var K={category:p,type:"boolean",default:!1,description:"Include `div` tag when followed by literal class or id syntax"};var J={category:p,type:"choice",default:"auto",description:"Define which framework is used in the project.",choices:[{value:"auto",description:"Try to identify used framework, if there is one."},{value:"vue",description:"Uses Vue.js."},{value:"svelte",description:"Uses Svelte."},{value:"angular",description:"Uses Angular."}]};var z={category:p,type:"choice",default:"literal",description:"Define how the id should be formatted.",choices:[{value:"literal",description:"Forces all valid ids to be printed as literals."},{value:"as-is",description:"Disables id formatting."}]};var X={category:p,type:"boolean",default:!1,description:"Preserve attribute brackets."};var Z={category:p,type:"boolean",default:!1,description:"Indent pug in template tags in single file components such as from vue or svelte."};var tt={category:p,type:"int",default:-1,description:"The maximum amount of attributes that an element can appear with on one line before it gets wrapped.",range:{start:-1,end:Number.POSITIVE_INFINITY,step:1}},et={category:p,type:"path",default:"",description:"Regex pattern to match attributes against that should always trigger wrapping."};var it={pugPrintWidth:N,pugSingleQuote:R,pugTabWidth:U,pugUseTabs:$,pugBracketSpacing:B,pugArrowParens:D,pugSemi:G,pugBracketSameLine:F,pugClosingBracketIndentDepth:q,pugAttributeSeparator:j,pugCommentPreserveSpaces:H,pugSortAttributes:C,pugSortAttributesBeginning:_,pugSortAttributesEnd:L,pugWrapAttributesThreshold:tt,pugWrapAttributesPattern:et,pugEmptyAttributes:W,pugClassNotation:Y,pugIdNotation:z,pugClassLocation:M,pugExplicitDiv:K,pugEmptyAttributesForceQuotes:Q,pugSingleFileComponentIndentation:Z,pugFramework:J,pugPreserveAttributeBrackets:X};function rt(r){return{printWidth:r.printWidth,pugPrintWidth:r.pugPrintWidth===-1?r.printWidth:r.pugPrintWidth,singleQuote:r.singleQuote,pugSingleQuote:r.pugSingleQuote??r.singleQuote,tabWidth:r.tabWidth,pugTabWidth:r.pugTabWidth===-1?r.tabWidth:r.pugTabWidth,useTabs:r.useTabs??!1,pugUseTabs:r.pugUseTabs??r.useTabs??!1,bracketSpacing:r.bracketSpacing,pugBracketSpacing:r.pugBracketSpacing??r.bracketSpacing,arrowParens:r.arrowParens,pugArrowParens:r.pugArrowParens??r.arrowParens,semi:r.semi,pugSemi:r.pugSemi??r.semi,bracketSameLine:r.bracketSameLine,pugBracketSameLine:r.pugBracketSameLine??r.bracketSameLine,pugAttributeSeparator:r.pugAttributeSeparator,pugCommentPreserveSpaces:r.pugCommentPreserveSpaces,pugSortAttributes:r.pugSortAttributes,pugSortAttributesBeginning:r.pugSortAttributesBeginning,pugSortAttributesEnd:r.pugSortAttributesEnd,pugWrapAttributesThreshold:r.pugWrapAttributesThreshold,pugWrapAttributesPattern:r.pugWrapAttributesPattern,pugClassNotation:r.pugClassNotation,pugIdNotation:r.pugIdNotation,pugClassLocation:r.pugClassLocation,pugEmptyAttributes:r.pugEmptyAttributes,pugEmptyAttributesForceQuotes:r.pugEmptyAttributesForceQuotes,pugSingleFileComponentIndentation:r.pugSingleFileComponentIndentation&&r.__embeddedInHtml===!0,pugFramework:r.pugFramework,pugExplicitDiv:r.pugExplicitDiv,pugPreserveAttributeBrackets:r.pugPreserveAttributeBrackets,pugClosingBracketIndentDepth:r.pugClosingBracketIndentDepth??0}}import{types as Ct}from"node:util";import{format as f}from"prettier";var nt={"<!doctype html>":"doctype html",'<?xml version="1.0" encoding="utf-8" ?>':"doctype xml",'<!doctype html public "-//w3c//dtd xhtml 1.0 transitional//en" "http://www.w3.org/tr/xhtml1/dtd/xhtml1-transitional.dtd">':"doctype transitional",'<!doctype html public "-//w3c//dtd xhtml 1.0 strict//en" "http://www.w3.org/tr/xhtml1/dtd/xhtml1-strict.dtd">':"doctype strict",'<!doctype html public "-//w3c//dtd xhtml 1.0 frameset//en" "http://www.w3.org/tr/xhtml1/dtd/xhtml1-frameset.dtd">':"doctype frameset",'<!doctype html public "-//w3c//dtd xhtml 1.1//en" "http://www.w3.org/tr/xhtml11/dtd/xhtml11.dtd">':"doctype 1.1",'<!doctype html public "-//w3c//dtd xhtml basic 1.1//en" "http://www.w3.org/tr/xhtml-basic/xhtml-basic11.dtd">':"doctype basic",'<!doctype html public "-//wapforum//dtd xhtml mobile 1.2//en" "http://www.openmobilealliance.org/tech/dtd/xhtml-mobile12.dtd">':"doctype mobile",'<!doctype plist public "-//apple//dtd plist 1.0//en" "http://www.apple.com/dtds/propertylist-1.0.dtd">':"doctype plist"};function st(r,t,i,e,n){let o=e.map(g=>new RegExp(g)).reverse(),s=n.map(g=>new RegExp(g)),a=r.name,u=t.name;if(o.length>0){let g=o.findIndex(m=>m.test(a)),c=o.findIndex(m=>m.test(u)),h=g-c;if(h>0)return-1;if(h<0)return 1}if(s.length>0){let g=s.findIndex(m=>m.test(a)),c=s.findIndex(m=>m.test(u)),h=g-c;if(h>0)return 1;if(h<0)return-1}switch(i){case"asc":{if(a>u)return 1;if(a<u)return-1;break}case"desc":{if(a>u)return-1;if(a<u)return 1;break}}return 0}function wt(r,t){let i=r.map((e,n)=>[e,n]);return i.sort((e,n)=>{let o=t(e[0],n[0]);return o===0?e[1]-n[1]:o}),i.map(([e])=>e)}function ot(r,t,i,e){let n=r.slice(0,t),o=r.slice(i),s=r.slice(t,i),a=wt(s,e);return[...n,...a,...o]}var Et=new Set([!0,'""',"''"]);function at(r,t,i){let{val:e,name:n}=r;if(i.map(a=>new RegExp(a)).some(a=>a.test(n))){r.val===!0&&(r.val='""');return}if(!(t==="as-is"||!Et.has(e)))switch(t){case"all":{r.val===!0&&(r.val='""');break}case"none":{(r.val==='""'||r.val==="''")&&(r.val=!0);break}}}function lt(r,t){for(let i=t-1;i>=0;i--){let e=r[i];if(!e)return;if(e.type==="tag")return e}}function pt(r,t){for(let i=t-1;i>0;i--){let e=r[i];if(!e||e.type==="start-attributes")return;if(e.type==="attribute"&&e.name!=="class"&&e.name!=="id")return e}}function ut(r,t){for(let i=t-1;i>0;i--){let e=r[i];if(!e||e.type==="start-attributes"||e.type==="tag")return;if(e.type==="attribute"&&e.name==="type")return e}}function T(r){return r.includes(`
`)?r.split(`
`).map(t=>t.trim()).map(t=>(t[0]==="."?"":" ")+t).join("").trim():r}function ct(r,t){return r==="style"&&d(t)}function k(r,t,i,e=0){return r.startsWith(t,e)&&r.endsWith(i,r.length-e)}function d(r){return/^(["'`])(.*)\1$/.test(r)?!new RegExp(`${r[0]}(?<!\\\\${r[0]})`).test(r.slice(1,-1)):!1}function gt(r){return/^`[\S\s]*`$/.test(r)&&r.includes("${")}function ht(r){return/^`[\S\s]*`$/m.test(r)&&r.includes(`
`)}function b(r,t,[i,e]=["{{","}}"]){return r?`${i} ${t} ${e}`:`${i}${t}${e}`}function S(r,t,i=!1){let e=t==='"'?"'":'"',n=r.replaceAll(/\\([\S\s])|(["'])/g,(o,s,a)=>s===e?s:a===t?`\\${a}`:a||(i&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/.test(s)?s:`\\${s}`));return t+n+t}function I(r,t,i,e){let n=r.indexOf(t),o=r.indexOf(i),s=r.indexOf("`");return n>=0&&o>=0&&o>n&&(s<0||n<s)?(e.log({code:r,quotes:t,otherQuotes:i,q1:n,q2:o,qb:s}),!0):!1}function dt(){try{let r=Object.keys(process.env).filter(t=>t.startsWith("npm_package_")).filter(t=>/(dev)?[Dd]ependencies_+/.test(t));if(r.some(t=>t.includes("vue")&&!t.includes("vuepress")))return"vue";if(r.some(t=>t.includes("svelte")))return"svelte";if(r.some(t=>t.includes("angular")))return"angular"}catch{return"auto"}return"auto"}function mt(r){return r.length>=3&&r[0]==="["&&r.at(-1)==="]"}function ft(r){return r.length>=3&&r[0]==="("&&r.at(-1)===")"}function bt(r){return r.length>=2&&r[0]==="*"}function Tt(r){return r.length>=5&&d(r)&&k(r,"{{","}}",1)&&!r.includes("{{",3)}var Ot=/\+(json|yaml)$/i,_t=/(^(["'`]))|((["'`])$)/g,Lt=new Map([["application/ecmascript","babel"],["application/javascript","babel"],["application/json","json"],["text/ecmascript","babel"],["text/javascript","babel"],["text/markdown","markdown"],["text/typescript","typescript"],["module","babel"]]);function yt(r){if(!r)return"babel";let t=r.val;if(typeof t!="string")return;let i=t.replaceAll(_t,"");if(!i)return"babel";let e=Ot.exec(i);return e?e[1]:Lt.get(i)}function Pt(r){return r.length>=3&&d(r)&&k(r,"{","}",1)&&!r.includes("{",2)}function vt(r){return/^(v-on:|@).*/.test(r)}function kt(r){return/^((v-(bind|slot))?:|v-(model|slot|if|for|else-if|text|html|t)|#).*/.test(r)}function St(r,t){return r==="v-for"&&t.includes("of")}function xt(r){return r==="v-bind"}function At(r){return r==="v-on"}function It(r){return r.startsWith("v-")}var x=class{constructor(t,i,e){this.content=t;this.tokens=i;this.options=e;this.indentString=e.pugUseTabs?"	":" ".repeat(e.pugTabWidth),e.pugSingleFileComponentIndentation&&this.indentLevel++,this.framework=e.pugFramework==="auto"?dt():e.pugFramework,this.quotes=this.options.pugSingleQuote?"'":'"',this.otherQuotes=this.options.pugSingleQuote?'"':"'";let n=V(e.pugAttributeSeparator);this.alwaysUseAttributeSeparator=n==="always",this.neverUseAttributeSeparator=n==="none";let o=e.pugWrapAttributesPattern;this.wrapAttributesPattern=o?new RegExp(o):null,this.codeInterpolationOptions={semi:e.pugSemi??e.semi,singleQuote:e.pugSingleQuote??e.singleQuote,bracketSpacing:e.pugBracketSpacing??e.bracketSpacing,arrowParens:e.pugArrowParens??e.arrowParens,printWidth:9e3,endOfLine:"lf",useTabs:e.pugUseTabs??e.useTabs,tabWidth:e.pugTabWidth??e.tabWidth,bracketSameLine:e.pugBracketSameLine??e.bracketSameLine}}result="";currentIndex=-1;currentLineLength=0;indentString;indentLevel=0;framework="auto";quotes;otherQuotes;alwaysUseAttributeSeparator;neverUseAttributeSeparator;wrapAttributesPattern;codeInterpolationOptions;currentTagPosition=0;possibleIdPosition=0;possibleClassPosition=0;previousAttributeRemapped=!1;wrapAttributes=!1;pipelessText=!1;pipelessComment=!1;currentlyInPugInterpolation=!1;classLiteralToAttribute=[];classLiteralAfterAttributes=[];get computedIndent(){switch(this.previousToken?.type){case"newline":case"outdent":return this.indentString.repeat(this.indentLevel);case"indent":return this.indentString;case"start-pug-interpolation":return""}return this.options.pugSingleFileComponentIndentation?this.indentString:""}get previousToken(){return this.tokens[this.currentIndex-1]}get nextToken(){return this.tokens[this.currentIndex+1]}async build(){l.isDebugEnabled()&&l.debug("[PugPrinter]:",JSON.stringify(this.tokens));let t=[];if(this.tokens[0]?.type==="text")t.push("| ");else if(this.tokens[0]?.type==="eos")return"";let i=this.getNextToken();for(;i;){l.debug("[PugPrinter]:",JSON.stringify(i));try{switch(i.type){case"attribute":case"class":case"end-attributes":case"id":case"eos":{this.result=t.join(""),await this[i.type](i),t.length=0,t.push(this.result);break}case"tag":case"start-attributes":case"interpolation":case"call":case":":this.result=t.join("");default:{if(typeof this[i.type]!="function")throw new Error("Unhandled token: "+JSON.stringify(i));t.push(await this[i.type](i));break}}}catch(e){throw new Error(e)}i=this.getNextToken()}return t.join("")}getNextToken(){return this.currentIndex++,this.tokens[this.currentIndex]??null}quoteString(t){return`${this.quotes}${t}${this.quotes}`}checkTokenType(t,i,e=!1){return!!t&&i.includes(t.type)!==e}tokenNeedsSeparator(t){return this.neverUseAttributeSeparator?!1:this.alwaysUseAttributeSeparator||/^([(:[]).*/.test(t.name)}getUnformattedContentLines(t,i){let{start:e}=t.loc,{end:n}=i.loc,o=this.content.split(/\r\n|\n|\r/),s=e.line-1,a=n.line-1,u=[],g=o[s];g!==void 0&&u.push(g.slice(e.column-1));for(let h=s+1;h<a;h++){let m=o[h];m!==void 0&&u.push(m)}let c=o[a];return c!==void 0&&u.push(c.slice(0,n.column-1)),u}replaceTagWithLiteralIfPossible(t,i){if(this.options.pugExplicitDiv)return;let e=Math.max(this.possibleIdPosition,this.possibleClassPosition),n=this.result.slice(this.currentTagPosition,e),o=n.replace(t,i);if(o!==n){let s=this.result.slice(0,this.currentTagPosition),a=this.result.slice(e);this.result=`${s}${o}${a}`;let u=n.length-o.length;this.possibleIdPosition-=u,this.possibleClassPosition-=u}}async frameworkFormat(t){let i={...this.codeInterpolationOptions,singleQuote:this.options.singleQuote};switch(this.framework){case"angular":{i.parser="__ng_interpolation";break}case"svelte":case"vue":default:i.parser="babel",i.semi=!1}let e=await f(t,i);return e[0]===";"&&(e=e.slice(1)),e}async formatText(t){let i="";for(;t;){let e=t.indexOf("{{");if(e===-1){let n=t.indexOf("{");if(this.options.pugFramework==="svelte"&&n!==-1){i+=t.slice(0,n),t=t.slice(n+1);let o=t.indexOf("}");if(o===-1)i+="{",i+=t,t="";else{let s=t.slice(0,o);try{if(I(s,this.quotes,this.otherQuotes,l)){l.warn("The following expression could not be formatted correctly. Please try to fix it yourself and if there is a problem, please open a bug issue:",s),i+=b(this.options.pugBracketSpacing,s),t=t.slice(o+1);continue}else s=await this.frameworkFormat(s)}catch(a){l.warn("[PugPrinter:formatText]: ",a);try{s=await f(s,{parser:"babel",...this.codeInterpolationOptions,semi:!1}),s[0]===";"&&(s=s.slice(1))}catch(u){l.warn(u)}}s=T(s),i+=b(this.options.pugBracketSpacing,s,["{","}"]),t=t.slice(o+1)}}else i+=t,t=""}else{i+=t.slice(0,e),t=t.slice(e+2);let n=t.indexOf("}}");if(n===-1)i+="{{",i+=t,t="";else{let o=t.slice(0,n);try{if(I(o,this.quotes,this.otherQuotes,l)){l.warn("The following expression could not be formatted correctly. Please try to fix it yourself and if there is a problem, please open a bug issue:",o),i+=b(this.options.pugBracketSpacing,o),t=t.slice(n+2);continue}else o=await this.frameworkFormat(o)}catch(s){typeof s=="string"?s.includes("Unexpected token Lexer Error")?s.includes("Unexpected character [`]")||l.debug("[PugPrinter:formatText]: Using fallback strategy"):s.includes("Bindings cannot contain assignments")?l.warn("[PugPrinter:formatText]: Bindings should not contain assignments:",`code: \`${o.trim()}\``):s.includes("Unexpected token '('")?this.framework!=="vue"&&l.warn("[PugPrinter:formatText]: Found unexpected token `(`.",`code: \`${o.trim()}\``):s.includes("Missing expected `)`")?this.framework!=="vue"&&l.warn("[PugPrinter:formatText]: Missing expected `)`.",`code: \`${o.trim()}\``):s.includes("Missing expected `:`")?this.framework!=="vue"&&l.warn("[PugPrinter:formatText]: Missing expected `:`.",`code: \`${o.trim()}\``):l.warn("[PugPrinter:formatText]: ",s):l.warn("[PugPrinter:formatText]: ",s);try{o=await f(o,{parser:"babel",...this.codeInterpolationOptions,semi:!1}),o[0]===";"&&(o=o.slice(1))}catch(a){l.warn(a)}}o=T(o),i+=b(this.options.pugBracketSpacing,o),t=t.slice(n+2)}}}return i}async formatDelegatePrettier(t,i,e={}){let{trimTrailingSemicolon:n=!1,trimLeadingSemicolon:o=!0}=e;t=t.trim();let s={...this.codeInterpolationOptions},a=d(t);return a&&(s.singleQuote=!this.options.pugSingleQuote,t=t.slice(1,-1)),t=await f(t,{parser:i,...s}),t=this.quotes==='"'?t.replaceAll('"','\\"'):t.replaceAll("'","\\'"),t=T(t),n&&t.at(-1)===";"&&(t=t.slice(0,-1)),o&&t[0]===";"&&(t=t.slice(1)),a?this.quoteString(t):t}async formatStyleAttribute(t){return this.formatDelegatePrettier(t,"css",{trimTrailingSemicolon:!0})}async formatVueEventBinding(t){return this.formatDelegatePrettier(t,"__vue_event_binding",{trimTrailingSemicolon:!0})}async formatVueExpression(t){return this.formatDelegatePrettier(t,"__vue_expression")}async formatAngularBinding(t){return this.formatDelegatePrettier(t,"__ng_binding")}async formatAngularAction(t){return this.formatDelegatePrettier(t,"__ng_action")}async formatAngularDirective(t){return this.formatDelegatePrettier(t,"__ng_directive")}async formatFrameworkInterpolation(t,i,[e,n]){if(t=t.slice(1,-1),t=t.slice(e.length,-n.length),t=t.trim(),t.includes(`\\${this.otherQuotes}`))l.warn("The following expression could not be formatted correctly. Please try to fix it yourself and if there is a problem, please open a bug issue:",t);else{let o={...this.codeInterpolationOptions,singleQuote:!this.options.pugSingleQuote};try{t=await f(t,{parser:i,...o})}catch{l.warn("The following expression could not be formatted correctly. Please try to fix it yourself and if there is a problem, please open a bug issue:",t)}t=T(t)}return t=b(this.options.pugBracketSpacing,t,[e,n]),this.quoteString(t)}async formatAngularInterpolation(t){return this.formatFrameworkInterpolation(t,"__ng_interpolation",["{{","}}"])}async formatSvelteInterpolation(t){return this.formatFrameworkInterpolation(t,"__ng_interpolation",["{","}"])}tag(t){let i=t.val;i==="div"&&!this.options.pugExplicitDiv&&this.nextToken&&(this.nextToken.type==="class"&&this.options.pugClassLocation==="before-attributes"||this.nextToken.type==="id")&&(i=""),this.currentLineLength+=i.length;let e=`${this.computedIndent}${i}`;return l.debug("tag",{result:e,val:t.val,length:t.val.length},this.currentLineLength),this.currentTagPosition=this.result.length+this.computedIndent.length,this.possibleIdPosition=this.result.length+e.length,this.possibleClassPosition=this.result.length+e.length,e}"start-attributes"(t){let i="";if(this.nextToken?.type==="attribute"){this.previousAttributeRemapped=!1,this.possibleClassPosition=this.result.length,i="(",l.debug(this.currentLineLength);let e=this.nextToken,n=this.currentIndex+1,o=!1,s=0;for(;e.type==="attribute";){switch(!this.currentlyInPugInterpolation&&!this.wrapAttributes&&this.wrapAttributesPattern?.test(e.name)&&(this.wrapAttributes=!0),e.name){case"class":case"id":{(e.name==="class"&&this.options.pugClassNotation!=="literal"||e.name==="id"&&this.options.pugIdNotation!=="literal")&&s++,o=!0;let a=e.val.toString();d(a)&&(this.currentLineLength-=2),this.currentLineLength+=1+a.length,l.debug({tokenName:e.name,length:e.name.length},this.currentLineLength);break}default:{this.currentLineLength+=e.name.length,s>0&&(this.currentLineLength+=1,this.tokenNeedsSeparator(e)&&(this.currentLineLength+=1)),l.debug({tokenName:e.name,length:e.name.length},this.currentLineLength);let a=e.val.toString();a.length>0&&a!=="true"&&(this.currentLineLength+=1+a.length,l.debug({tokenVal:a,length:a.length},this.currentLineLength)),s++;break}}e=this.tokens[++n]}if(l.debug("after token",this.currentLineLength),o&&this.previousToken?.type==="tag"&&this.previousToken.val==="div"&&!this.options.pugExplicitDiv&&(this.currentLineLength-=3),s>0&&(this.currentLineLength+=2),this.options.pugClassLocation==="after-attributes"){let a=n,u=this.tokens[++a];for(;u.type==="class";){let g=u.val.toString();this.currentLineLength+=1+g.length,l.debug({tokenVal:g,length:g.length},this.currentLineLength),u=this.tokens[++a]}}if(l.debug("final line length",{currentLineLength:this.currentLineLength}),!this.currentlyInPugInterpolation&&!this.wrapAttributes&&(this.currentLineLength>this.options.pugPrintWidth||this.options.pugWrapAttributesThreshold>=0&&s>this.options.pugWrapAttributesThreshold)&&(this.wrapAttributes=!0),this.options.pugSortAttributes!=="as-is"||this.options.pugSortAttributesEnd.length>0||this.options.pugSortAttributesBeginning.length>0){let a=this.tokens.indexOf(t),u=n;u-a>2&&(this.tokens=ot(this.tokens,a+1,u,(g,c)=>st(g,c,this.options.pugSortAttributes,this.options.pugSortAttributesBeginning,this.options.pugSortAttributesEnd)))}}return i}async attribute(t){if(at(t,this.options.pugEmptyAttributes,this.options.pugEmptyAttributesForceQuotes),typeof t.val=="string"&&d(t.val)&&t.val[0]!=="`"){if(t.name==="class"&&this.options.pugClassNotation==="literal"){let n=t.val.slice(1,-1).trim().split(/\s+/),o=[],s=[],a=/^-?[A-Z_a-z]+[\w-]*$/;for(let u of n)a.test(u)?this.options.pugClassLocation==="after-attributes"?this.classLiteralAfterAttributes.push(u):s.push(u):o.push(u);if(s.length>0){let u=this.possibleClassPosition;this.result=[this.result.slice(0,u),".",s.join("."),this.result.slice(u)].join(""),this.possibleClassPosition+=1+s.join(".").length,this.options.pugClassLocation==="before-attributes"&&this.replaceTagWithLiteralIfPossible(/div\./,".")}if(o.length>0)t.val=S(o.join(" "),this.quotes),this.previousAttributeRemapped=!1;else{this.previousAttributeRemapped=!0;return}}else if(t.name==="id"&&this.options.pugIdNotation!=="as-is"){let e=t.val;if(e=e.slice(1,-1),e=e.trim(),!/^-?[A-Z_a-z]+[\w-]*$/.test(e)){e=S(e,this.quotes),this.result+="id",t.mustEscape||(this.result+="!"),this.result+=`=${e}`;return}let o=this.possibleIdPosition,s=`#${e}`;this.result=[this.result.slice(0,o),s,this.result.slice(o)].join(""),this.possibleClassPosition+=s.length,this.replaceTagWithLiteralIfPossible(/div#/,"#"),this.previousAttributeRemapped=!0;return}}let i=pt(this.tokens,this.currentIndex);if(this.previousToken?.type==="attribute"&&(!this.previousAttributeRemapped||i)&&(this.tokenNeedsSeparator(t)&&(this.result+=","),this.wrapAttributes||(this.result+=" ")),this.previousAttributeRemapped=!1,this.wrapAttributes&&(this.result+=`
`,this.result+=this.indentString.repeat(this.indentLevel+1)),this.result+=t.name,typeof t.val=="boolean")t.val||(this.result+=`=${t.val}`);else if(t.name==="class"&&this.options.pugClassNotation==="attribute"){let n=(d(t.val)?t.val.slice(1,-1).trim():t.val).split(/\s+/);if(this.classLiteralToAttribute.length>0)for(let o=this.classLiteralToAttribute.length-1;o>-1;o--){let s=this.classLiteralToAttribute.splice(o,1)[0];s&&n.unshift(s)}this.result+=`=${d(t.val)?this.quoteString(n.join(" ")):n.join(" ")}`}else{let e=t.val;if(!ht(e)){if(!gt(e))if(St(t.name,e))e=await this.formatDelegatePrettier(e,"vue");else if(kt(t.name))e=await this.formatVueExpression(e);else if(vt(t.name))e=await this.formatVueEventBinding(e);else if(this.framework==="vue"&&It(t.name))e=await this.formatVueExpression(e);else if(xt(t.name))e=await this.formatDelegatePrettier(e,"__js_expression");else if(At(t.name))e=await this.formatDelegatePrettier(e,"__js_expression");else if(mt(t.name))e=await this.formatAngularBinding(e);else if(ft(t.name))e=await this.formatAngularAction(e);else if(bt(t.name))e=await this.formatAngularDirective(e);else if(Tt(e))e=await this.formatAngularInterpolation(e);else if(Pt(e))e=await this.formatSvelteInterpolation(e);else if(ct(t.name,t.val))e=await this.formatStyleAttribute(e);else{let n=e.trimEnd();if(d(n))e=S(n.slice(1,-1),this.quotes);else{if(e==="true")return;if(t.mustEscape){e=await f(e,{parser:"__js_expression",...this.codeInterpolationOptions});let o=e.split(`
`),s=this.wrapAttributes?this.indentLevel+1:this.indentLevel;if(o.length>1){e=o[0]??"";for(let a=1;a<o.length;a++)e+=`
`,e+=this.indentString.repeat(s),e+=o[a]}}else e=e.trim(),e=e.replaceAll(/\s\s+/g," "),e[0]==="{"&&e[1]===" "&&(e=`{${e.slice(2)}`)}}}t.mustEscape||(this.result+="!"),this.result+=`=${e}`}}"end-attributes"(t){if(this.wrapAttributes&&this.result.at(-1)!=="("&&(this.options.pugBracketSameLine||(this.result+=`
`),this.result+=this.indentString.repeat(this.indentLevel+this.options.pugClosingBracketIndentDepth)),this.wrapAttributes=!1,this.classLiteralToAttribute.length>0){this.previousToken?.type==="start-attributes"?this.result+="(":this.previousToken?.type==="attribute"&&(this.result+=" ");let i=this.classLiteralToAttribute.splice(0,this.classLiteralToAttribute.length);this.result+=`class=${this.quoteString(i.join(" "))}`,this.previousToken?.type==="start-attributes"&&(this.result+=")")}if(this.result.at(-1)==="("?this.result=this.result.slice(0,-1):this.previousToken?.type==="attribute"?(this.options.pugBracketSameLine&&(this.result=this.result.trimEnd()),this.result+=")"):this.options.pugPreserveAttributeBrackets&&this.previousToken?.type==="start-attributes"&&(this.result+="()"),this.result.at(-1)===")"&&this.classLiteralAfterAttributes.length>0){let i=this.classLiteralAfterAttributes.splice(0,this.classLiteralAfterAttributes.length);this.result+=`.${i.join(".")}`}this.options.pugClassLocation==="after-attributes"&&(this.possibleClassPosition=this.result.length),(this.nextToken?.type==="text"||this.nextToken?.type==="path")&&(this.result+=" ")}indent(t){let i=`
${this.indentString.repeat(this.indentLevel)}`;return this.indentLevel++,this.currentLineLength=i.length-1+1+this.options.pugTabWidth,l.debug("indent",{result:i,indentLevel:this.indentLevel,pugTabWidth:this.options.pugTabWidth},this.currentLineLength),i}outdent(t){let i="";return this.previousToken&&this.previousToken.type!=="outdent"&&(t.loc.start.line-this.previousToken.loc.end.line>1&&(i+=`
`),i+=`
`),this.indentLevel--,this.currentLineLength=1+this.indentString.repeat(this.indentLevel).length,l.debug("outdent",{result:i,indentLevel:this.indentLevel},this.currentLineLength),i}class(t){if(this.options.pugClassNotation==="attribute"){if(this.classLiteralToAttribute.push(t.val),(this.previousToken===void 0||this.checkTokenType(this.previousToken,["tag","class","end-attributes"],!0)||this.previousToken.type==="tag"&&this.previousToken.val==="div"&&this.nextToken?.type!=="attribute"&&!this.options.pugExplicitDiv)&&(this.result+=`${this.computedIndent}div`),this.checkTokenType(this.nextToken,["text","newline","indent","outdent","eos",":"])){let i=this.classLiteralToAttribute.splice(0,this.classLiteralToAttribute.length);if(this.result.at(-1)===")"){let e=this.result.lastIndexOf("("),n=this.result.indexOf("class=",e);n>-1?this.result=[this.result.slice(0,n+7),i.join(" ")," ",this.result.slice(n+7)].join(""):this.result=this.result.slice(0,-1)+`${this.neverUseAttributeSeparator?" ":", "}class=${this.quoteString(i.join(" "))})`}else this.result+=`(class=${this.quoteString(i.join(" "))})`;this.nextToken?.type==="text"&&(this.result+=" ")}}else{let i=`.${t.val}`;switch(this.currentLineLength+=i.length,l.debug("before class",{result:this.result,val:i,length:i.length,previousToken:this.previousToken},this.currentLineLength),this.previousToken?.type){case void 0:case"newline":case"outdent":case"indent":{let e=this.options.pugExplicitDiv||this.options.pugClassLocation==="after-attributes"?"div":"",n=`${this.computedIndent}${e}`;this.options.pugClassLocation==="after-attributes"?this.classLiteralAfterAttributes.push(i.slice(1)):n+=i,this.currentLineLength+=e.length,this.possibleIdPosition=this.result.length+this.computedIndent.length+e.length,this.result+=n,this.possibleClassPosition=this.result.length;break}case"end-attributes":{let e=this.result.slice(0,this.possibleClassPosition);this.result=[e,i,this.result.slice(this.possibleClassPosition)].join(""),this.possibleClassPosition+=i.length;break}default:{if(this.options.pugClassLocation==="after-attributes")this.classLiteralAfterAttributes.push(i.slice(1));else{let e=this.result.slice(0,this.possibleClassPosition);this.result=[e,i,this.result.slice(this.possibleClassPosition)].join(""),this.possibleClassPosition+=i.length}break}}if(this.options.pugClassLocation==="after-attributes"&&this.classLiteralAfterAttributes.length>0){let e=this.result.slice(0,this.possibleClassPosition);if(["text","newline","indent","outdent","eos","code",":",void 0].includes(this.nextToken?.type)){let n=this.classLiteralAfterAttributes.splice(0,this.classLiteralAfterAttributes.length);e+="."+n.join(".")}this.result=[e,this.result.slice(this.possibleClassPosition)].join(""),this.possibleClassPosition=this.result.length,this.replaceTagWithLiteralIfPossible(/div\./,".")}l.debug("after class",{result:this.result,val:i,length:i.length},this.currentLineLength),this.nextToken?.type==="text"&&!/^\s+$/.test(this.nextToken.val)&&(this.currentLineLength+=1,this.result+=" ")}}eos(t){for(;this.result.at(-1)===`
`;)this.result=this.result.slice(0,-1);this.result+=`
`}comment(t){let i=this.computedIndent;if(/^ prettier-ignore($|[ :])/.test(t.val)){let e=this.getNextToken();if(e){let n=e.type==="newline",o=0;for(;e;){let{type:s}=e;if(s==="newline"&&o===0)if(n)n=!1;else break;else if(s==="indent")o++;else if(s==="outdent"){if(o--,o<=0){o<0&&this.indentLevel--;break}}else if(s==="eos")break;e=this.getNextToken()}if(e){let s=this.getUnformattedContentLines(t,e),a=s.pop();a!==void 0&&s.push(a.trimEnd()),i+=s.join(`
`),e.type==="eos"&&(i+=`
`)}}}else this.checkTokenType(this.previousToken,["newline","indent","outdent"],!0)&&(i+=" "),i+="//",t.buffer||(i+="-"),i+=A(t.val,this.options.pugCommentPreserveSpaces),this.nextToken?.type==="start-pipeless-text"&&(this.pipelessComment=!0);return i}newline(t){let i="";return this.previousToken&&t.loc.start.line-this.previousToken.loc.end.line>1&&(i+=`
`),i+=`
`,this.currentLineLength=1+this.indentString.repeat(this.indentLevel).length,l.debug("newline",{result:i,indentLevel:this.indentLevel},this.currentLineLength),i}async text(t){let i="",e=t.val,n=!1,o=e.at(-1)===" "&&!/^\s+$/.test(e);if(this.pipelessText){switch(this.previousToken?.type){case"newline":{e.trim().length>0&&(i+=this.indentString.repeat(this.indentLevel+1));break}case"start-pipeless-text":{i+=this.indentString;break}}this.pipelessComment&&(e=A(e,this.options.pugCommentPreserveSpaces,!0))}else{if(this.nextToken&&o)switch(this.nextToken.type){case"interpolated-code":case"start-pug-interpolation":{n=!0;break}}switch(e=e.replaceAll(/\s\s+/g," "),this.previousToken?.type){case"newline":{i+=this.indentString.repeat(this.indentLevel),/^ .+$/.test(e)&&(i+=`|
`,i+=this.indentString.repeat(this.indentLevel)),i+="|",(/.*\S.*/.test(t.val)||this.nextToken?.type==="start-pug-interpolation")&&(i+=" ");break}case"indent":case"outdent":{i+=this.computedIndent,/^ .+$/.test(e)&&(i+=`|
`,i+=this.indentString.repeat(this.indentLevel)),i+="|",/.*\S.*/.test(t.val)&&(i+=" ");break}case"interpolated-code":case"end-pug-interpolation":{/^ .+$/.test(e)||e===" "?i+=" ":/^.+ $/.test(e)&&(n=!0);break}}e=e.trim(),e=await this.formatText(e),e=e.replaceAll(/#([[{])/g,"\\#$1")}return this.checkTokenType(this.previousToken,["tag","id","interpolation","call","&attributes","filter"])&&(e.length===0&&this.nextToken?.type==="indent"?o=!1:e=` ${e}`),i+=e,n&&(i+=" "),o&&this.nextToken?.type==="indent"&&(i+=`
`+this.indentString.repeat(this.indentLevel+1)+"|"),i}"interpolated-code"(t){let i="";switch(this.previousToken?.type){case"tag":case"class":case"id":case"end-attributes":{i=" ";break}case"start-pug-interpolation":{i="| ";break}case"indent":case"newline":case"outdent":{i=this.computedIndent,i+=this.pipelessText?this.indentString:"| ";break}}return i+=t.mustEscape?"#":"!",i+=b(this.options.pugBracketSpacing,t.val.trim(),["{","}"]),i}async code(t){let i=this.computedIndent;!t.mustEscape&&t.buffer&&(i+="!"),i+=t.buffer?"=":"-";let e=this.options.pugSemi;e&&(t.mustEscape||t.buffer)&&(e=!1);let n=t.val;try{let o=n;n=await f(n,{parser:"babel",...this.codeInterpolationOptions,semi:e,endOfLine:"lf"}),n=n.slice(0,-1),n[0]===";"&&(n=n.slice(1)),n.includes(`
`)&&(n=o)}catch(o){l.warn("[PugPrinter]:",o)}return i+=` ${n}`,i}id(t){let i=`#${t.val}`;switch(this.currentLineLength+=i.length,this.previousToken?.type){case void 0:case"newline":case"outdent":case"indent":{let e=this.options.pugExplicitDiv?"div":"",n=`${this.computedIndent}${e}${i}`;this.currentLineLength+=e.length,this.result+=n,this.possibleClassPosition=this.result.length;break}default:{let e=this.result.slice(0,this.possibleIdPosition);this.possibleClassPosition+=i.length,this.result=[e,i,this.result.slice(this.possibleIdPosition)].join("");break}}}async"start-pipeless-text"(t){this.pipelessText=!0;let i=`
${this.indentString.repeat(this.indentLevel)}`;if(this.previousToken?.type==="dot"){let e=lt(this.tokens,this.currentIndex),n;switch(e?.val){case"script":{n=yt(ut(this.tokens,this.currentIndex));break}case"style":{n="css";break}default:break}if(n){let o=this.currentIndex+1,s=this.tokens[o],a="",u=!1;for(;s&&s.type!=="end-pipeless-text";){switch(s.type){case"text":{a+=s.val;break}case"newline":{a+=`
`;break}case"interpolated-code":{u=!0,a+=s.mustEscape?"#":"!",a+=`{${s.val}}`;break}default:{l.warn("[PugPrinter:start-pipeless-text]:","Unhandled token for pipeless script tag:",JSON.stringify(s));break}}o++,s=this.tokens[o]}try{i=await f(a,{parser:n,...this.codeInterpolationOptions})}catch(c){if(!u)throw l.error(c),c;let h=["[PugPrinter:start-pipeless-text]:","The following expression could not be formatted correctly.","This is likely a syntax error or an issue caused by the missing execution context.","If you think this is a bug, please open a bug issue."];h.push(`
code: \`${a.trim()}\``,`
You used interpolated code in your pipeless script tag, so you may ignore this warning.`),Ct.isNativeError(c)?h.push(`
Found ${n} ${c.name}: ${c.message}.`):(l.debug("typeof error:",typeof c),h.push(`
Unexpected error for parser ${n}.`,c)),l.warn(...h),i=a}i=i.trimEnd();let g=this.indentString.repeat(this.indentLevel+1);i=i.split(`
`).map(c=>c?g+c:"").join(`
`),i=`
${i}`,s=this.tokens[o-1],s?.type==="text"&&s.val===""&&(i+=`
`),this.currentIndex=o-1}}return i}"end-pipeless-text"(t){return this.pipelessText=!1,this.pipelessComment=!1,""}doctype(t){let i=`${this.computedIndent}doctype`;return t.val&&(i+=` ${t.val}`),i}dot(t){return"."}block(t){let i=`${this.computedIndent}block `;return t.mode!=="replace"&&(i+=`${t.mode} `),i+=t.val,i}extends(t){return`${this.options.pugSingleFileComponentIndentation?this.indentString:""}extends `}path(t){let i="";return this.checkTokenType(this.previousToken,["include","filter"])&&(i+=" "),i+=t.val,i}"start-pug-interpolation"(t){let i="";return this.tokens[this.currentIndex-2]?.type==="newline"&&this.previousToken?.type==="text"&&this.previousToken.val.trim().length===0&&(i+=this.indentString.repeat(this.indentLevel+1)),this.currentlyInPugInterpolation=!0,i+="#[",i}"end-pug-interpolation"(t){return this.currentlyInPugInterpolation=!1,"]"}interpolation(t){let i=`${this.computedIndent}#{${t.val}}`;return this.currentLineLength+=i.length,this.possibleIdPosition=this.result.length+i.length,this.possibleClassPosition=this.result.length+i.length,i}include(t){return`${this.computedIndent}include`}filter(t){return`${this.computedIndent}:${t.val}`}call(t){let i=`${this.computedIndent}+${t.val}`,e=t.args;return e&&(e=e.trim(),e=e.replaceAll(/\s\s+/g," "),i+=`(${e})`),this.currentLineLength+=i.length,this.possibleIdPosition=this.result.length+i.length,this.possibleClassPosition=this.result.length+i.length,i}mixin(t){let i=`${this.computedIndent}mixin ${t.val}`,e=t.args;return e&&(e=e.trim(),e=e.replaceAll(/\s\s+/g," "),i+=`(${e})`),i}if(t){let i=this.computedIndent,e=/^!\((.*)\)$/.exec(t.val);return l.debug("[PugPrinter]:",e),i+=e?`unless ${e[1]}`:`if ${t.val}`,i}"mixin-block"(t){return`${this.computedIndent}block`}else(t){return`${this.computedIndent}else`}"&attributes"(t){let i=`&attributes(${t.val})`;return this.currentLineLength+=i.length,i}"text-html"(t){let i=/^<(.*?)>(.*)<\/(.*?)>$/.exec(t.val);if(l.debug("[PugPrinter]:",i),i)return`${this.computedIndent}${i[1]} ${i[2]}`;let e=Object.entries(nt).find(([n])=>n===t.val.toLowerCase());return e?`${this.computedIndent}${e[1]}`:`${this.computedIndent}${t.val}`}each(t){let i=`${this.computedIndent}each ${t.val}`;return t.key!==null&&(i+=`, ${t.key}`),i+=` in ${t.code}`,i}async eachOf(t){let i=t.value.trim();i=await f(i,{parser:"babel",...this.codeInterpolationOptions,semi:!1}),i[0]===";"&&(i=i.slice(1)),i=T(i);let e=t.code.trim();return`${this.computedIndent}each ${i} of ${e}`}while(t){return`${this.computedIndent}while ${t.val}`}case(t){return`${this.computedIndent}case ${t.val}`}when(t){return`${this.computedIndent}when ${t.val}`}":"(t){return this.possibleIdPosition=this.result.length+2,this.possibleClassPosition=this.result.length+2,": "}default(t){return`${this.computedIndent}default`}"else-if"(t){return`${this.computedIndent}else if ${t.val}`}blockcode(t){return`${this.computedIndent}-`}yield(t){return`${this.computedIndent}yield`}slash(t){let i="/";return this.nextToken?.type==="text"&&(i+=" "),i}};var v={languages:[{name:"Pug",parsers:["pug"],tmScope:"text.jade",aceMode:"jade",codemirrorMode:"pug",codemirrorMimeType:"text/x-pug",extensions:[".jade",".pug"],linguistLanguageId:179,vscodeLanguageIds:["jade","pug"]}],parsers:{pug:{parse(r,t){l.debug("[parsers:pug:parse]:",{text:r});let i=r.replace(/^\s*\n/,""),e=/^\s*/.exec(i);if(e?.[0]){let s=new RegExp(`(^|\\n)${e[0]}`,"g");i=i.replace(s,"$1")}let n=i,o=Nt(n);return{content:n,tokens:o}},astFormat:"pug-ast",hasPragma(r){return r.startsWith(`//- @prettier
`)||r.startsWith(`//- @format
`)},locStart(r){return l.debug("[parsers:pug:locStart]:",{node:r}),0},locEnd(r){return l.debug("[parsers:pug:locEnd]:",{node:r}),0},preprocess(r,t){return l.debug("[parsers:pug:preprocess]:",{text:r}),r}}},printers:{"pug-ast":{async print(r,t){let i=r.stack[0],{content:e,tokens:n}=i,o=rt(t),a=await new x(e,n,o).build();return l.debug("[printers:pug-ast:print]:",a),a},insertPragma(r){return`//- @prettier
${r}`}}},options:it,defaultOptions:{}},ii=v.languages,ri=v.parsers,ni=v.printers,si=v.options,oi=v.defaultOptions;export{w as LogLevel,P as Logger,E as createLogger,oi as defaultOptions,ii as languages,l as logger,si as options,ri as parsers,v as plugin,ni as printers};
//# sourceMappingURL=index.js.map